"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8694],{87281:function(e,t,a){a.r(t);a(72269),a(93359),a(61788),a(19977),a(25809);var n=a(90978),l=a(96057),r=(a(64406),a(36930),a(85956)),c=a(65978),s=a(67294),u=a(35249);t.default=function(){return s.createElement(r.dY,null,s.createElement(s.Suspense,{fallback:s.createElement(c.Z,null)},s.createElement(s.Fragment,null,s.createElement("div",{className:"markdown"},s.createElement("h4",{id:"使用方式"},s.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#使用方式"},s.createElement("span",{className:"icon icon-link"})),"使用方式"),s.createElement("h2",{id:"简介"},s.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#简介"},s.createElement("span",{className:"icon icon-link"})),"简介"),s.createElement("p",null,u.texts[0].value,s.createElement("strong",null,u.texts[1].value),u.texts[2].value),s.createElement("p",null,s.createElement("b",null,u.texts[3].value)),s.createElement("p",null,u.texts[4].value,s.createElement("code",null,u.texts[5].value),u.texts[6].value),s.createElement(n.Z,{lang:"ts"},u.texts[7].value),s.createElement("p",null,u.texts[8].value,s.createElement("code",null,u.texts[9].value),u.texts[10].value),s.createElement(n.Z,{lang:"ts"},u.texts[11].value),s.createElement("p",null,u.texts[12].value,s.createElement("code",null,u.texts[13].value),u.texts[14].value),s.createElement(n.Z,{lang:"ts"},u.texts[15].value),s.createElement("p",null,u.texts[16].value,s.createElement("code",null,u.texts[17].value),u.texts[18].value),s.createElement(n.Z,{lang:"ts"},u.texts[19].value),s.createElement(l.Z,null,s.createElement("thead",null,s.createElement("tr",null,s.createElement("th",null,u.texts[20].value),s.createElement("th",null,u.texts[21].value))),s.createElement("tbody",null,s.createElement("tr",null,s.createElement("td",null,u.texts[22].value),s.createElement("td",null,u.texts[23].value,s.createElement("code",null,u.texts[24].value),u.texts[25].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*IF_yR6LCyw4AAAAAAAAAAABkARQnAQ",style:{width:"50%"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[26].value),s.createElement("td",null,u.texts[27].value,s.createElement("code",null,u.texts[28].value),u.texts[29].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*8YQzSpmUnEAAAAAAAAAAAABkARQnAQ",style:{width:"50%"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[30].value),s.createElement("td",null,u.texts[31].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*JRyMSIpRfRwAAAAAAAAAAABkARQnAQ",style:{width:"50%"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[32].value),s.createElement("td",null,u.texts[33].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*soWnSLeska8AAAAAAAAAAABkARQnAQ",style:{width:"50%"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[34].value),s.createElement("td",null,u.texts[35].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*anXLQ72bP78AAAAAAAAAAABkARQnAQ",style:{width:"50%"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[36].value),s.createElement("td",null,u.texts[37].value,s.createElement("code",null,u.texts[38].value),u.texts[39].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*RB6IRobZJBoAAAAAAAAAAAAAARQnAQ",style:{width:"98px"},alt:"violin"}))),s.createElement("tr",null,s.createElement("td",null,u.texts[40].value),s.createElement("td",null,u.texts[41].value,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*USWRQ4MxENAAAAAAAAAAAABkARQnAQ",style:{width:"98px"}}),s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*NxwVQqQsgHwAAAAAAAAAAABkARQnAQ",style:{width:"92px"}}))),s.createElement("tr",null,s.createElement("td",null,u.texts[42].value),s.createElement("td",null,u.texts[43].value)))),s.createElement("h2",{id:"快速上手自定义-shape"},s.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#快速上手自定义-shape"},s.createElement("span",{className:"icon icon-link"})),"快速上手自定义 Shape"),s.createElement("p",null,u.texts[44].value,s.createElement("strong",null,u.texts[45].value),u.texts[46].value),s.createElement("p",null,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*MHASTo6s90oAAAAAAAAAAABkARQnAQ#align=left&display=inline&height=196&originHeight=196&originWidth=249&status=done&style=none&width=249",alt:""})),s.createElement("p",null,u.texts[47].value),s.createElement("p",null,s.createElement("img",{src:"https://gw.alipayobjects.com/mdn/rms_2274c3/afts/img/A*8MCIS7hehZsAAAAAAAAAAABkARQnAQ#align=left&display=inline&height=196&originHeight=196&originWidth=245&status=done&style=none&width=245",alt:""})),s.createElement("h4",{id:"第一步注册-triangle-shape"},s.createElement("a",{"aria-hidden":"true",tabIndex:"-1",href:"#第一步注册-triangle-shape"},s.createElement("span",{className:"icon icon-link"})),"第一步，注册 'triangle' shape"),s.createElement(n.Z,{lang:"javascript"},u.texts[48].value),s.createElement("p",null,u.texts[49].value),s.createElement("ol",null,s.createElement("li",null,u.texts[50].value,s.createElement("code",null,u.texts[51].value),u.texts[52].value),s.createElement("li",null,u.texts[53].value,s.createElement("code",null,u.texts[54].value),u.texts[55].value),s.createElement("li",null,u.texts[56].value,s.createElement("a",{href:"https://g.antv.vision/zh/docs/api/general/container/#addshapecfg-shapecfg"},u.texts[57].value),u.texts[58].value)),s.createElement("blockquote",null,s.createElement("p",null,u.texts[59].value))))))}},47407:function(e,t,a){a.d(t,{T:function(){return n.T}});var n=a(27822)},56184:function(e,t,a){a.d(t,{p:function(){return n.p}});var n=a(67810)},62207:function(e,t,a){a.d(t,{G:function(){return n.G}});var n=a(1834)},71362:function(e,t,a){a.d(t,{S:function(){return n.S}});var n=a(97137)},35249:function(e,t,a){a.r(t),a.d(t,{texts:function(){return n}});const n=[{value:"Shape is built in to configure general graphics requirements. Custom Shapes work well for some ",paraId:0,tocIndex:1},{value:"highly customized",paraId:0,tocIndex:1},{value:" graphical visualization needs.",paraId:0,tocIndex:1},{value:"Chart shapes can be configured in four ways:",paraId:1,tocIndex:1},{value:"The first，pass ",paraId:2,tocIndex:1},{value:"string",paraId:2,tocIndex:1},{value:" to set the built-in Shape.",paraId:2,tocIndex:1},{value:"// 柱状图/条形图\nshape: 'hollow-rect' | 'tick';\n// 散点图\nshape: 'cicle' | 'square';\n// 其他内置 shape: circle, square, bowtie, diamond, hexagon, triangle,triangle-down, hollow-circle, hollow-square, hollow-bowtie,hollow-diamond, hollow-hexagon, hollow-triangle, hollow-triangle-down, cross, tick, plus, hyphen, line\n",paraId:3,tocIndex:1},{value:"The second，pass ",paraId:4,tocIndex:1},{value:"[]",paraId:4,tocIndex:1},{value:" to set Shape.",paraId:4,tocIndex:1},{value:"  // 区分的字段\n  shapeField: 'x';\n  // 更具区分的字段 区分形状\n  shape: ['circle', 'square'];\n",paraId:5,tocIndex:1},{value:"The third，pass ",paraId:6,tocIndex:1},{value:"callback",paraId:6,tocIndex:1},{value:" to set Shape.",paraId:6,tocIndex:1},{value:"  // 区分的字段\n  shapeField: 'x';\n  // 回调区分形状\n  shape: (x) => {\n    if(x === '2020'){\n      return 'circle';\n    }\n    // TODO\n    return 'square';\n  };\n",paraId:7,tocIndex:1},{value:"The fourth， ",paraId:8,tocIndex:1},{value:"G2.registerShape",paraId:8,tocIndex:1},{value:" custom Shape.",paraId:8,tocIndex:1},{value:"import { G2 } from '@antv/g2plot';\n\n// 往 interval 几何标记上注册名为 'line' 的 shape\nG2.registerShape('interval', 'line', {\n  // 定义 line 的关键点\n  getPoints(shapePoint: ShapePoint) {\n    return getLinePoints(shapePoint);\n  },\n  // 图形具体的绘制代码\n  draw(cfg: ShapeInfo, container: IGroup) {\n    const style = getStyle(cfg, true, false, 'lineWidth');\n    const path = this.parsePath(getRectPath(cfg.points));\n    const shape = container.addShape('path', {\n      attrs: {\n        ...style,\n        path,\n      },\n      name: 'interval',\n    });\n\n    return shape;\n  },\n  // 定义图形的缩略图样式\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol: (x: number, y: number, r: number) => {\n        return [\n          ['M', x, y - r],\n          ['L', x, y + r],\n        ];\n      },\n      style: {\n        r: 5,\n        stroke: color,\n      },\n    };\n  },\n});\n",paraId:9,tocIndex:1},{value:"Geometry 类型",paraId:10,tocIndex:1},{value:"描述",paraId:10,tocIndex:1},{value:"point",paraId:10,tocIndex:1},{value:"点的绘制很简单，只要获取它的坐标以及大小即可，其中的  ",paraId:10,tocIndex:1},{value:"size",paraId:10,tocIndex:1},{value:"  属性代表的是点的半径。 ",paraId:10,tocIndex:1},{value:"line",paraId:10,tocIndex:1},{value:"线其实是由无数个点组成，在 G2 中我们将参与绘制的各个数据转换成坐标上的点然后通过线将逐个点连接而成形成线图，其中的  ",paraId:10,tocIndex:1},{value:"size",paraId:10,tocIndex:1},{value:"  属性代表的是线的粗细。 ",paraId:10,tocIndex:1},{value:"area",paraId:10,tocIndex:1},{value:"area 面其实是在 line 线的基础之上形成的，它将折线图中折线与自变量坐标轴之间的区域使用颜色或者纹理填充。",paraId:10,tocIndex:1},{value:"interval",paraId:10,tocIndex:1},{value:"interval 默认的图形形状是矩形，而矩形实际是由四个点组成的，在 G2 中我们根据 pointInfo 中的 x、y、size 以及 y0 这四个值来计算出这四个点，然后顺时针连接而成。",paraId:10,tocIndex:1},{value:"polygon",paraId:10,tocIndex:1},{value:"polygon 多边形其实也是由多个点连接而成，在 pointInfo 中 x 和 y 都是数组结构。",paraId:10,tocIndex:1},{value:"violin",paraId:10,tocIndex:1},{value:"violin 小提琴图也是由多个点连接而成。 ",paraId:10,tocIndex:1},{value:"pointInfo",paraId:10,tocIndex:1},{value:" 中，x 是小提琴中心点的 x 坐标，size 是小提琴的最大宽度，而 _size 和 y 是相同长度的 number 数组，每一对 (_size, y) 表示小提琴图上的一个采样点。_size 是采样点处的概率密度，即小提琴的宽度；y 是采样点在 y 轴上的位置。",paraId:10,tocIndex:1},{value:"schema",paraId:10,tocIndex:1},{value:"schema 作为一种自定义的几何图形，在 G2 中默认提供了 box 和 candle 两种 shape，分别用于绘制箱型图和股票图，注意这两种形状的矩形部分四个点的连接顺序都是顺时针，并且起始点均为左下角，这样就可以无缝转换至极坐标。",paraId:10,tocIndex:1},{value:"edge",paraId:10,tocIndex:1},{value:"edge 边同 line 线一致，区别就是 edge 是一个线段，连接边的两个端点即可。",paraId:10,tocIndex:1},{value:"以柱状图举例，几何标记 interval 会给出四个关键点（即组成矩形的四个顶点），然后将这四个点依次连接，得到每个柱子的形状。",paraId:11,tocIndex:2},{value:"红色圆形",paraId:11,tocIndex:2},{value:"标记就是几何标记点。默认的柱状图就是通过四个几何标记点，依次相连后得到的。",paraId:11,tocIndex:2},{value:"下面我们就使用自定义 shape 的功能，把上面的柱状图的柱子变成三角形，即如下图所示：",paraId:12,tocIndex:2},{value:"import { G2, Column } from '@antv/g2plot';\n\nG2.registerShape('interval', 'triangle', {\n  // 1. 定义关键点\n  getPoints(cfg) {\n    const x = cfg.x;\n    const y = cfg.y;\n    const y0 = cfg.y0;\n    const width = cfg.size;\n    return [\n      { x: x - width / 2, y: y0 },\n      { x: x, y: y },\n      { x: x + width / 2, y: y0 },\n    ];\n  },\n  // 2. 绘制\n  draw(cfg, group) {\n    const points = this.parsePoints(cfg.points); // 将0-1空间的坐标转换为画布坐标\n    const polygon = group.addShape('path', {\n      attrs: {\n        path: [\n          ['M', points[0].x, points[0].y],\n          ['L', points[1].x, points[1].y],\n          ['L', points[2].x, points[2].y],\n        ],\n        ...cfg.defaultStyle,\n      },\n    });\n    return polygon;\n  },\n});\n\nconst data = [\n  { year: '1951 年', value: 38 },\n  { year: '1952 年', value: 52 },\n  { year: '1956 年', value: 61 },\n  { year: '1957 年', value: 145 },\n  { year: '1958 年', value: 48 },\n];\n\nconst column = new Column('container', {\n  data,\n  xField: 'year',\n  yField: 'value',\n  legend: {\n    position: 'top-left',\n  },\n  // 自定义 shape\n  shape: 'triangle',\n});\n\ncolumn.render();\n",paraId:13,tocIndex:3},{value:"上面代码中，我们进行了三步操作：",paraId:14,tocIndex:3},{value:"通过 ",paraId:15,tocIndex:3},{value:"getPoints()",paraId:15,tocIndex:3},{value:"   方法返回三角形的三个关键点（即三个顶点）。此时 cfg 中会传入，x, y, y0, size。其中 x, y 是柱子最高点的坐标，y0 是横坐标轴的 y 坐标，size 是柱子默认宽度。",paraId:15,tocIndex:3},{value:"得到标记点后，我们在 ",paraId:15,tocIndex:3},{value:"draw()",paraId:15,tocIndex:3},{value:" 方法中拿到 cfg.points 数据和数据映射后的图形属性数据（比如 cfg.color），再通过绘图库提供的多边形图形，将三个点依次头尾相连，生成每个三角形。",paraId:15,tocIndex:3},{value:"通过 addShap 来绘制图形，addShape 的参数参考： ",paraId:15,tocIndex:3},{value:"绘图文档",paraId:15,tocIndex:3},{value:"。",paraId:15,tocIndex:3},{value:"注意：points 数据和参与 points 计算的配置项都是 0-1 空间的数据！",paraId:16,tocIndex:3}]}}]);